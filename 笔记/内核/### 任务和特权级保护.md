### 任务和特权级保护

P198，  调试运行2，各章节，代码分析

<img src="/home/biu/.config/Typora/typora-user-images/image-20230409164736275.png" alt="image-20230409164736275" style="zoom:67%;" />

局部描述符表，
LDTR，
LDT最大64KB000000

任务状态段（TSS），保存相关信息
TR寄存器

地址空间的访问是依靠分段机制来进行的。具体地说，需要现在描述符表中定义各个段的描述符，然后再通过描述符来访问它们。因此，全局地址空间是用全局描述符表（GDT）来指定的，而局部地址空间则是由每个任务私有的局部描述符表（LDT）来定义的。

![image-20230409172500739](/home/biu/.config/Typora/typora-user-images/image-20230409172500739.png)

32位保护模式下的物理地址怎么确定的
任务？



每个描述符两比特的DPL字段，当处理器正在一个代码段中取指令和执行的这个代码段，那个代码段的特权级叫做当前特权级（CPL）。

特权指令

为了让特权级低的应用程序可以调用特权级高的操作系统例程

1,高特权级代码段定义为依从的。

![image-20230410152408652](/home/biu/.config/Typora/typora-user-images/image-20230410152408652.png)

![image-20230410153225329](/home/biu/.config/Typora/typora-user-images/image-20230410153225329.png)

段描述符用于描述内存段，门描述符则用于描述可执行的代码，不同特权级之间的过程调用可以使用调用门。64位

可以使用jump far 或 call far，并把调用门描述符的选择子作为操作数。

![image-20230410163606112](/home/biu/.config/Typora/typora-user-images/image-20230410163606112.png)
